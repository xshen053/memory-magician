import { generateAllReviewDates, generateDatesForPeriodicCards, generateDatesForDailyCards } from '../../../src/utilities/algorithm/ebbinghaus-forgetting-curve1.js';

describe('generateAllReviewDates', () => {
  it('generates review dates using default intervals', () => {
    const startDate = '2024-02-04T00:00:00.000Z';
    const expectedDates = [
      '2024-02-04T00:00:00.000Z',
      '2024-02-05T00:00:00.000Z',
      "2024-02-09T00:00:00.000Z",
      "2024-02-14T00:00:00.000Z",
      "2024-02-24T00:00:00.000Z",
      "2024-03-05T00:00:00.000Z",
      "2024-03-19T23:00:00.000Z",
      "2024-04-03T23:00:00.000Z",
      "2024-05-03T23:00:00.000Z",
      "2024-06-02T23:00:00.000Z",
      "2024-07-02T23:00:00.000Z",      
    ];
    const reviewDates = generateAllReviewDates(startDate);
    expect(reviewDates).toEqual(expectedDates);
  });

  it('handles custom intervals correctly', () => {
    const startDate = '2024-02-04T00:00:00.000Z';
    const customIntervals = [2, 4];
    const expectedDates = [
      '2024-02-06T00:00:00.000Z', // Date + 2 days
      '2024-02-08T00:00:00.000Z', // Date + 4 days
    ];
    const reviewDates = generateAllReviewDates(startDate, customIntervals);
    expect(reviewDates).toEqual(expectedDates);
  });

  it('returns an empty array when given an empty array of intervals', () => {
    const startDate = '2024-02-04T00:00:00.000Z';
    const reviewDates = generateAllReviewDates(startDate, []);
    expect(reviewDates).toEqual([]);
  });
});


describe('generateDatesForPeriodicCards', () => {
  it('repeat a card 20 times every 10 days', () => {
    const startDate = '2024-02-04T00:00:00.000Z';
    const expectedDates = [
      '2024-02-04T00:00:00.000Z',
      '2024-02-14T00:00:00.000Z',
      "2024-02-24T00:00:00.000Z",
      "2024-03-05T00:00:00.000Z",
      "2024-03-14T23:00:00.000Z",
      "2024-03-24T23:00:00.000Z",
      "2024-04-03T23:00:00.000Z",
      "2024-04-13T23:00:00.000Z",
      "2024-04-23T23:00:00.000Z",
      "2024-05-03T23:00:00.000Z",
      "2024-05-13T23:00:00.000Z",
      "2024-05-23T23:00:00.000Z",
      "2024-06-02T23:00:00.000Z",
      "2024-06-12T23:00:00.000Z",
      "2024-06-22T23:00:00.000Z",
      "2024-07-02T23:00:00.000Z",
      "2024-07-12T23:00:00.000Z",
      "2024-07-22T23:00:00.000Z",
      "2024-08-01T23:00:00.000Z",
      "2024-08-11T23:00:00.000Z",      
    ];
    const everyNdays = 10;
    const reviewDates = generateDatesForPeriodicCards(startDate, everyNdays);
    expect(reviewDates).toEqual(expectedDates);
    expect(reviewDates.length).toEqual(20)
  });
})

describe('generateDatesForDailyCards', () => {
  it('generate 90 dates', () => {
    const startDate = '2024-02-04T00:00:00.000Z';
    const expectedDates = [
      "2024-02-04T00:00:00.000Z",
      "2024-02-05T00:00:00.000Z",
      "2024-02-06T00:00:00.000Z",
      "2024-02-07T00:00:00.000Z",
      "2024-02-08T00:00:00.000Z",
      "2024-02-09T00:00:00.000Z",
      "2024-02-10T00:00:00.000Z",
      "2024-02-11T00:00:00.000Z",
      "2024-02-12T00:00:00.000Z",
      "2024-02-13T00:00:00.000Z",
      "2024-02-14T00:00:00.000Z",
      "2024-02-15T00:00:00.000Z",
      "2024-02-16T00:00:00.000Z",
      "2024-02-17T00:00:00.000Z",
      "2024-02-18T00:00:00.000Z",
      "2024-02-19T00:00:00.000Z",
      "2024-02-20T00:00:00.000Z",
      "2024-02-21T00:00:00.000Z",
      "2024-02-22T00:00:00.000Z",
      "2024-02-23T00:00:00.000Z",
      "2024-02-24T00:00:00.000Z",
      "2024-02-25T00:00:00.000Z",
      "2024-02-26T00:00:00.000Z",
      "2024-02-27T00:00:00.000Z",
      "2024-02-28T00:00:00.000Z",
      "2024-02-29T00:00:00.000Z",
      "2024-03-01T00:00:00.000Z",
      "2024-03-02T00:00:00.000Z",
      "2024-03-03T00:00:00.000Z",
      "2024-03-04T00:00:00.000Z",
      "2024-03-05T00:00:00.000Z",
      "2024-03-06T00:00:00.000Z",
      "2024-03-07T00:00:00.000Z",
      "2024-03-08T00:00:00.000Z",
      "2024-03-09T00:00:00.000Z",
      "2024-03-10T00:00:00.000Z",
      "2024-03-10T23:00:00.000Z",
      "2024-03-11T23:00:00.000Z",
      "2024-03-12T23:00:00.000Z",
      "2024-03-13T23:00:00.000Z",
      "2024-03-14T23:00:00.000Z",
      "2024-03-15T23:00:00.000Z",
      "2024-03-16T23:00:00.000Z",
      "2024-03-17T23:00:00.000Z",
      "2024-03-18T23:00:00.000Z",
      "2024-03-19T23:00:00.000Z",
      "2024-03-20T23:00:00.000Z",
      "2024-03-21T23:00:00.000Z",
      "2024-03-22T23:00:00.000Z",
      "2024-03-23T23:00:00.000Z",
      "2024-03-24T23:00:00.000Z",
      "2024-03-25T23:00:00.000Z",
      "2024-03-26T23:00:00.000Z",
      "2024-03-27T23:00:00.000Z",
      "2024-03-28T23:00:00.000Z",
      "2024-03-29T23:00:00.000Z",
      "2024-03-30T23:00:00.000Z",
      "2024-03-31T23:00:00.000Z",
      "2024-04-01T23:00:00.000Z",
      "2024-04-02T23:00:00.000Z",
      "2024-04-03T23:00:00.000Z",
      "2024-04-04T23:00:00.000Z",
      "2024-04-05T23:00:00.000Z",
      "2024-04-06T23:00:00.000Z",
      "2024-04-07T23:00:00.000Z",
      "2024-04-08T23:00:00.000Z",
      "2024-04-09T23:00:00.000Z",
      "2024-04-10T23:00:00.000Z",
      "2024-04-11T23:00:00.000Z",
      "2024-04-12T23:00:00.000Z",
      "2024-04-13T23:00:00.000Z",
      "2024-04-14T23:00:00.000Z",
      "2024-04-15T23:00:00.000Z",
      "2024-04-16T23:00:00.000Z",
      "2024-04-17T23:00:00.000Z",
      "2024-04-18T23:00:00.000Z",
      "2024-04-19T23:00:00.000Z",
      "2024-04-20T23:00:00.000Z",
      "2024-04-21T23:00:00.000Z",
      "2024-04-22T23:00:00.000Z",
      "2024-04-23T23:00:00.000Z",     
      "2024-04-24T23:00:00.000Z",
      "2024-04-25T23:00:00.000Z",
      "2024-04-26T23:00:00.000Z",
      "2024-04-27T23:00:00.000Z",
      "2024-04-28T23:00:00.000Z",
      "2024-04-29T23:00:00.000Z",
      "2024-04-30T23:00:00.000Z",
      "2024-05-01T23:00:00.000Z",
      "2024-05-02T23:00:00.000Z",    
    ];
    const reviewDates = generateDatesForDailyCards(startDate);
    expect(reviewDates).toEqual(expectedDates);
    expect(reviewDates.length).toEqual(90)
  });
})
